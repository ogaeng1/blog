---
title: Virtual DOM
date: '2023-02-21'
tags: ['React']
draft: false
summary: 'Virtual DOM에 대해 알아보자'
---

리액트의 특징 중 하나가 Virtual DOM을 사용하는 것이다. Virtual DOM을 알아보기 전에
DOM이 무엇인지 알아보자.

## DOM

DOM(Document Object Model)은 객체로 문서 구조를 표현하는 방법으로 XML이나 HTML로 작성한다. <br />
웹 브라우저는 DOM을 활용하여 객체에 자바스크립트와 CSS를 적용한다고 한다. DOM은 트리 형태를 띄고 있으며 <br/ >
특정 노드를 찾거나 수정 및 제거와 원하는 곳에 삽입할 수 있다.

![](/static/images/dom.png)

DOM에는 치명적인 단점 하나가 있다고 한다. 그건 바로 동적 UI에 최적화되어 있지 않다는 것이다. <br />
HTML은 자체적으로 정적이기 때문에 자바스크립트를 사용하여 이를 동적으로 만들어야 한다.

## DOM은 느리다? 🤔

DOM 자체만 놓고 보면 빠르다고 한다. DOM 자체를 읽고 쓸 때의 성능은 자바스크립트 객체를 처리할 때의 성능과
비교하여 다르지 않다. 하지만 웹 브라우저에서 DOM에 변화가 일어나면 웹 브라우저가 CSS를 다시 연산하고, 레이아웃을 구성하고,
페이지를 리페인트 한다고 한다. 이 과정에서 시간이 허비된다고 한다.

<br />

## 이런 문제를 어떻게 해결할 수 있을까? 🤔

HTML 마크업을 시각적인 형태로 변환하는 것은 웹 브라우저가 하는 주 역할이기 때문에, 이를 처리할 때 컴퓨터 자원을 사용하는 것은
어쩔 수 없다고 한다. DOM을 조작할 때마다 엔진이 웹 페이지를 새로 그리기 때문에 업데이트가 너무 잦다면 성능이 저하될 수 있다.
이런 문제를 해결하기 위해 DOM을 아예 조작하지 않을 수 없기 때문에 대신 DOM을 최소한으로 조작하여 작업을 처리하는 방식으로 개선할 수 있다.
리액트는 Virtual DOM 방식을 사용하여 DOM 업데이트를 추상화함으로써 DOM 처리 횟수를 최소화하고 효율적으로 진행한다.

<br />

## Virtual DOM

Virtual DOM을 사용하면 실제 DOM에 접근하여 조작하게 아닌 이를 추상화한 자바스크립트 객체를 구성하여 사용한다. <br />
리액트에서 데이터가 변하여 웹 브라우저에 실제 DOM을 업데이트할 때는 다음 3가지 절차를 통한다. <br />

1. 데이터를 업데이트하면 전체 UI를 Virtual DOM에 리렌더링 한다.
2. 이전 Virtual DOM에 있던 내용과 현재 내용을 비교한다.
3. 바뀐 부분만 실제 DOM에 적용한다.

![](/static/images/virtual.png)

이렇게만 보면 무조건 Virtual DOM을 사용하는 게 좋아 보일 수 있지만 실제로는 사용하지 않을 때와 비교했을 때 무조건 빠른 건 아니라고 한다.
리액트를 사용하지 않아도 코드 최적화를 열심히 하면 DOM 작업이 느려지는 문제를 개선할 수 있고, 작업이 간단할 때는 오히려 리액트를 사용하지
않는 편이 더 나은 성능을 보이기도 한다고 한다.
