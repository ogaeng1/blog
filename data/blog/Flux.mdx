---
title: Flux 패턴
date: '2023-09-08'
tags: ['React', 'Redux']
draft: false
summary: 'Flux 패턴에 대해 알아보자'
---

## Flux 패턴의 등장 배경

Flux 패턴이 무엇인지 알아보기 전에, Flux 패턴이 등장하게 된 배경부터 살펴보겠습니다.
Flux 패턴은 페이스북에서 MVC 모델의 단점을 보완하기 위해 발표한 애플리케이션 아키텍처입니다. 그럼 MVC 란 무엇일까요?

![](/static/images/mvc.png)

MVC는 각각 Model, View, Controller 를 의미합니다. Model에 데이터를 저장하고, Controller를 이용하여 Model의 데이터를 관리(CRUD)합니다. 
Model의 데이터가 변경되면 View로 전달되어 우리에게, 즉 사용자에게 보여집니다. 
여기서 중요한 점은 사용자가 View를 통해 데이터를 입력하면 View 또한 Model의 데이터를 업데이트할 수 있게 된다는 것입니다. 
이것은 데이터가 양방향으로 흐를 수 있다는 걸 의미합니다. 여기서 말한 “데이터가 양방향으로 흐른다” 라는 말이 문제가 되는 부분입니다. 
단순하게 생각해보면 데이터가 양방향으로 흐르면 좋은거 아니야? 라고 생각할 수 있을지도 모릅니다. 물론 위 사진처럼 크기가 작은 애플리케이션일 때 말입니다.

![](/static/images/mvc2.png)

만약 위 사진처럼 애플리케이션의 규모가 굉장히 커서 다음과 같은 구조를 가진다고 생각해 보겠습니다. 
View가 여러 상호작용을 위해 수많은 Model들을 동시에 업데이트하고 Model 또한 여러개의 View에 데이터를 전달하는 상황이 발생합니다. 
하나의 Model이 업데이트 된다면 그에 따라 View도 업데이트가 되고, 
업데이트된 View가 또다시 다른 Model을 업데이트 한다고 생각하면 굉장히 복잡한 데이터 흐름을 갖게 될 것입니다. 
따라서 많은 의존성을 갖게 되면 Model의 수가 많아질수록 각 Model에서 발생한 이벤트가 애플리케이션 전체로 퍼져나갈 때 이를 예측하기 힘들어 집니다. 
이런 문제를 해결하기 위해 Flux 패턴이 탄생했습니다.


## Flux 패턴

Flux 패턴은 MVC 모델의 양방향 데이터 흐름과 달리 단방향 데이터 흐름을 가집니다. 
Flux 패턴은 사용자 입력을 기반으로 Action 을 만들고 Action 을 Dispatcher 에 전달하여 
Store 의 데이터를 변경한 뒤 View 에 반영하는 방식으로 애플리케이션을 만드는 아키텍처입니다.

![](/static/images/flux.png)

* Action
> Action은 데이터를 변경하는 행위입니다. Action creator 메서드는 새로 발생한 Action의 type과 새로운 데이터 (payload) 를 묶어 Dispatcher에 전달합니다.

* Dispatcher
> Dispatcher는 모든 데이터의 흐름을 관리하는 중앙 허브입니다. 
Action을 받아서 Store 에 전달하는 역할을 하며, Store 의 데이터를 조작하는 것은 오직 Dispatcher만 가능합니다.

* Store
> 상태 저장소로 상태와 상태를 변경할 수 있는 메서드를 가지고 있습니다. 
발생한 Action의 타입에 따라 그에 맞는 데이터 변경을 수행하는 콜백함수를 Dispatcher에 등록합니다. 
Store의 상태 변경이 완료되면 변경된 상태를 View에 전달한다.

* View
> 리액트의 컴포넌트라고 생각하시면 될 것 같습니다. 
Store에서 View에게 상태가 변경되었음을 알려주면 최상위 View는 Store에서 데이터를 가져와 자식 View에게 내려보냅니다. 
새로운 데이터를 받은 View는 화면을 리렌더링합니다. 만약 사용자가 View에 어떤 조작을 하면 그에 맞는 Action을 생성합니다.

![](/static/images/flux2.png)


## Flux 패턴과 Redux

Redux는 Flux 아키텍처 디자인 패턴을 기반으로 한 라이브러리입니다. 
Redux는 애플리케이션의 상태들을 하나의 Store에서 관리하며, 이 Store에서 상태를 변경하는 모든 작업들은 Action을 통해 수행됩니다. 
그리고 변경된 상태는 사용자들에게 전달되어 UI가 업데이트 됩니다.

Flux 패턴과 Redux는 모두 단방향 데이터 흐름을 갖고 있습니다. 
이는 데이터의 일관성과 예측 가능성을 유지하며, 모든 상태의 변경이 불변성을 유지하도록 합니다. 
이러한 구조는 우리가 자주 사용하는 리액트와 함께 사용될 때, 애플리케이션의 복잡성을 낮추고 유지 보수성을 높이는데 도움을 주게 되는 것입니다.